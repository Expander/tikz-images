\documentclass[crop,tikz]{standalone}
\usepackage{pgfplots}
\pgfplotsset{compat=1.18}
\usepgfplotslibrary{fillbetween}

% Flow around a Joukowski profile with non-zero circulation.
%
% Let t(z) = a + b z and w(t) = (t + 1/t)/2. The Joukowski profile is
% given by mapping the unit circle z = e^{i\phi} to f(z) = w(t(z)).
%
% To draw the flow, let z(w) be the inverse mapping, given by
% z(w) = (w - a)/b + s*sqrt(w^2 - 1)*abs(b)/b^2 with s = +1 or -1.
% The flow around the Joukowski profile is then given by
% Im[F(z(w))] == constant, where F(z) = (z + 1/z)/2 + i*k*ln(z).

\pgfplotsset{
  inverted/.style = {
    every axis legend/.append style={
      draw=white,
      fill=hardblack,
      text=white
    }
  },
}

\begin{document}
\begin{tikzpicture}
  \pgfmathsetmacro{\remin}{-3};
  \pgfmathsetmacro{\remax}{3};
  \pgfmathsetmacro{\immin}{-3};
  \pgfmathsetmacro{\immax}{3};
  \pgfmathsetmacro{\rea}{-0.15}; % Re(a)
  \pgfmathsetmacro{\ima}{0.23}; % Im(a)
  \pgfmathsetmacro{\reb}{0.23*sqrt(26)}; % Re(b)
  \pgfmathsetmacro{\imb}{0}; % Im(b)
  \pgfmathsetmacro{\circlulation}{(\ima*\reb + (1 - \rea)*\imb)/(\reb*\reb + \imb*\imb)}; % kutta condition for smooth flow
  \begin{axis}[
    axis equal image,
    xmin={\remin}, xmax={\remax},
    ymin={\immin}, ymax={\immax},
    xlabel={$\Re$},
    ylabel={$\Im$},
    view={0}{90},
    samples=100,
    samples y=100,
    xtick distance=1,
    ytick distance=1,
    declare function = {
      nt(\p,\ra,\ia,\rb,\ib) = \ra^2 + \ia^2 + \rb^2 + \ib^2 + 2*(\ra*\rb + \ia*\ib)*cos(\p) + 2*(\ia*\rb - \ra*\ib)*sin(\p); % |a + b e^{i\phi}|^2
      rj(\p,\ra,\ia,\rb,\ib) = (\ra + \rb*cos(\p) - \ib*sin(\p))*(1 + 1/nt(\p,\ra,\ia,\rb,\ib)); % Re[w(t(e^{i\phi}))]
      ij(\p,\ra,\ia,\rb,\ib) = (\ia + \rb*sin(\p) + \ib*cos(\p))*(1 - 1/nt(\p,\ra,\ia,\rb,\ib)); % Im[w(t(e^{i\phi}))]
    },
    ]
    \begin{scope}[even odd rule]
      % clip Joukowski profile
      \clip ({\remin},{\immin}) rectangle ({\remax},{\immax}) plot[domain=0:360] (
        {rj(\x,\rea,\ima,\reb,\imb)/2},
        {ij(\x,\rea,\ima,\reb,\imb)/2}
      ) -- cycle;
      % flow lines
      \addplot[
        red,
        very thin,
        domain={\remin}:{\remax},
        domain y={\immin}:{\immax},
        raw gnuplot,
        contour prepared,
        contour/labels=false,
        contour/draw color=red,
     ] gnuplot {
        set samples 51,2;
        set isosamples 2,50;
        set contour base;
        set cntrlabel onecolor;
        set cntrparam bspline levels incremental -3,0.15,3;
        k = \circlulation;
        a = \rea + \ima*I;
        b = \reb + \imb*I;
        s(w) = real(w) < 0 ? -1 : 1;
        z(w) = (w - a)/b + s(w)*sqrt(w**2 - 1)*abs(b)/b**2;
        F(z) = (z + 1/z)/2 + I*k*log(z);
        splot [\remin:\remax] [\immin:\immax] imag(F(z(x + I*y)))
      };
    \end{scope}
    % Joukowski profile
    \addplot[ultra thick,domain=0:360] (
      {rj(\x,\rea,\ima,\reb,\imb)/2},
      {ij(\x,\rea,\ima,\reb,\imb)/2}
    );
  \end{axis}
\end{tikzpicture}
\end{document}
